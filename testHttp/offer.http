@uri = http://localhost:{{ $dotenv PORT }}

#csurf - cookie avec une jwt valide 1 an
@cookie_csurf = token_data=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InRva2VuIjoiZXlKamIyNTBaVzUwSWpvaWIzUlRTR3RRV0d4aWRHOXpXR1UzV1d0WWVVcFhUSE5IYkhCWVRtOW5WV1JRVFdoUGNtaFJUemhXYUZkV1JHMWlVWHBHU1ZVdlJtd3ljRzRyYUZVdmVVTmFPRGxNYzA5MlVtSnpZVlpLYW5wR2NrNVNXblFyWmtGUmVVSXpSME50VDJ0UFNFVXlZV3hYTTBSSmNqSmtWVll3UWt3NU0ydGxPVTFCUVdKck5WTWlmUT09In0sImlhdCI6MTY1NjA3OTY0MSwiZXhwIjoxNjg2MzE5NjQxLCJpc3MiOiJjdG91dHdlYiIsInN1YiI6ImNzdXJmX3Rva2VuIiwianRpIjoiYzJmMTUwZTEtZjMzNy00MjI4LWE1OGEtNDNmMjAyNWUyMmFlIn0.5t-nIXyJYv1nu_HzGyA4hDvMkVD5_SlEx54s0EBUV-A

#auth - cookie avec un jwt valide 1 an
@cookie_auth = authorization=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7InJvbGVJZCI6Mn0sImlhdCI6MTY1NjM0NTkzNSwiZXhwIjoxNjg2NTg1OTM1LCJpc3MiOiJtaXN0eWNsaWMiLCJzdWIiOiJhdXRob3JpemF0aW9uIiwianRpIjoiNzU1OTU2YzEtZWQ2Yy00ZTA5LTllMjYtZWFjMDQ2NGQwN2FhIn0.OJOmsgHdSHzaeLCnAxxumIftUyp6ypRdahgIWy40f-g
#token associé a ce jwt
@token = "eyJjb250ZW50IjoiMnRsNU14NVk0MnVOM3VYcm0rcVdmUGJzZHhJYU1CMU1TcTRyZFQ3RUx4MzJRUFo5SE5UcTFtTnBONEF2RTUwVSJ9"

### Ajout d'une offre
POST {{uri}}/api/offers/
Cookie: {{cookie_csurf}}
Cookie: {{cookie_auth}}
Content-Type: application/json

{
    "token": {{token}},    
    "name": "mes fleurs à vendres pour pas chers",
    "presentation": "pour l'achat de 2 roses, vous bénificié d'un remboursement immédiat de 0.50€",
    "globalRefund": "499",
    "individualRefund": "0.50",
    "imageName": "fleur.jpg",
    "userId": "2",
    "storeId": "3",
    "cityId": "1",
    "conditions": [1,2,5]
}

### récupération d'une offre
GET {{uri}}/api/offers/2

### récupération de toutes les offres
GET {{uri}}/api/offers

### récupération des offres par ville
GET {{uri}}/api/offers/by-city/2

### récupération des offres par commerce
GET {{uri}}/api/offers/by-store/2

###suppression d'une offre
DELETE {{uri}}/api/offers/2
Cookie: {{cookie_csurf}}
Cookie: {{cookie_auth}}
Content-Type: application/json

{
    "token": {{token}},
    "userId": "1" 
}

### généraion de token
GET  {{uri}}/api/offers/generate-token/2/token/{{token}}/user/1
Cookie: {{cookie_csurf}}
Cookie: {{cookie_auth}}